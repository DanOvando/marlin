<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="marlin">
<title>optimize_mpa • marlin</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="optimize_mpa">
<meta property="og:description" content="marlin">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">marlin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/MSE.html">MSE</a>
    <a class="dropdown-item" href="../articles/dynamic-habitat.html">dynamic-habitat</a>
    <a class="dropdown-item" href="../articles/fleet-management.html">fleet-management</a>
    <a class="dropdown-item" href="../articles/optimize_mpa.html">optimize_mpa</a>
    <a class="dropdown-item" href="../articles/port_distance.html">port_distance</a>
    <a class="dropdown-item" href="../articles/seasonal-dynamics.html">seasonal-dynamics</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/danovando/marlin/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>optimize_mpa</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/danovando/marlin/blob/HEAD/vignettes/optimize_mpa.Rmd" class="external-link"><code>vignettes/optimize_mpa.Rmd</code></a></small>
      <div class="d-none name"><code>optimize_mpa.Rmd</code></div>
    </div>

    
    
<p>One of the hardest questions of marine protected area (MPA) design is
the simple “how big should it be and where should it go”?
<code>marlin</code> can’t tell you how big it should be, but it
<em>can</em> help you evaluate the impacts to different objectives of
different MPA networks, and if you supply it with an objective function
weighting scheme, the best network to maximize your objective
function.</p>
<p>This is achieved with the <code>optimize_mpa</code> function, that at
its core requires an <code>alpha</code> parameter that specifies the
relative weighting of conservation to economic interests, where 1 means
that the only objective is conservation, zero means the only objective
is economic.</p>
<p><code>optimize_mpa</code> then finds the MPA network of a specified
size that maximizes your objective function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://danovando.github.io/marlin/">marlin</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching packages</span> ─────────────────────────────────────── tidyverse 1.3.1 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2</span> 3.3.6      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr  </span> 0.3.4 </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble </span> 3.1.8      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr  </span> 1.0.10</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr  </span> 1.2.0      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr</span> 1.4.1 </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr  </span> 2.1.2      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats</span> 0.5.1</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span></span>
<span><span class="va">resolution</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span></span>
<span><span class="va">years</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span></span>
<span><span class="va">seasons</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span></span>
<span><span class="va">steps</span> <span class="op">&lt;-</span> <span class="va">years</span> <span class="op">*</span> <span class="va">seasons</span></span>
<span></span>
<span><span class="va">time_step</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="va">seasons</span></span>
<span><span class="co"># for now make up some habitat</span></span>
<span></span>
<span></span>
<span><span class="va">skipjack_habitat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">resolution</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">resolution</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>habitat <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="op">(</span><span class="va">x</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">+</span> <span class="va">y</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span>, <span class="fl">20</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">y</span>, values_from <span class="op">=</span> <span class="va">habitat</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">x</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">bigeye_habitat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">resolution</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">resolution</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>habitat <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="op">(</span><span class="va">x</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">+</span> <span class="va">y</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span>, <span class="fl">300</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">y</span>, values_from <span class="op">=</span> <span class="va">habitat</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">x</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">bigeye_habitat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">resolution</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">resolution</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>habitat <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="op">(</span><span class="va">x</span> <span class="op">^</span> <span class="fl">.2</span> <span class="op">+</span> <span class="va">y</span> <span class="op">^</span> <span class="fl">.2</span><span class="op">)</span>, <span class="fl">100</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">y</span>, values_from <span class="op">=</span> <span class="va">habitat</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">x</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fauna</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"skipjack"</span> <span class="op">=</span> <span class="fu"><a href="../reference/create_critter.html">create_critter</a></span><span class="op">(</span></span>
<span>      scientific_name <span class="op">=</span> <span class="st">"Katsuwonus pelamis"</span>,</span>
<span>      base_habitat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">skipjack_habitat</span>, <span class="va">skipjack_habitat</span><span class="op">)</span>, <span class="co"># pass habitat as lists</span></span>
<span>      season_blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>, <span class="co"># seasons each habitat apply to</span></span>
<span>      recruit_habitat <span class="op">=</span> <span class="va">skipjack_habitat</span>,</span>
<span>      adult_diffusion <span class="op">=</span> <span class="fl">2</span>, <span class="co"># standard deviation of the number of patches moved by adults</span></span>
<span>      rec_form <span class="op">=</span> <span class="fl">1</span>, <span class="co"># recruitment form, where 1 implies local recruitment</span></span>
<span>      seasons <span class="op">=</span> <span class="va">seasons</span>,</span>
<span>      init_explt <span class="op">=</span> <span class="fl">0.4</span>, </span>
<span>      explt_type <span class="op">=</span> <span class="st">"f"</span></span>
<span>      <span class="op">)</span>,</span>
<span>    <span class="st">"bigeye"</span> <span class="op">=</span> <span class="fu"><a href="../reference/create_critter.html">create_critter</a></span><span class="op">(</span></span>
<span>      scientific_name <span class="op">=</span> <span class="st">"Thunnus obesus"</span>,</span>
<span>      base_habitat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">bigeye_habitat</span>, <span class="va">bigeye_habitat2</span><span class="op">)</span>, <span class="co"># pass habitat as lists</span></span>
<span>      season_blocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>, <span class="co"># seasons each habitat apply to</span></span>
<span>      recruit_habitat <span class="op">=</span> <span class="va">bigeye_habitat</span>,</span>
<span>      adult_diffusion <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      rec_form <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      seasons <span class="op">=</span> <span class="va">seasons</span>,</span>
<span>      init_explt <span class="op">=</span> <span class="fl">0.7</span>, </span>
<span>      explt_type <span class="op">=</span> <span class="st">"f"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">fleets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"longline"</span> <span class="op">=</span> <span class="fu"><a href="../reference/create_fleet.html">create_fleet</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>       <span class="st">"skipjack"</span> <span class="op">=</span> <span class="va"><a href="../reference/Metier.html">Metier</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>        critter <span class="op">=</span> <span class="va">fauna</span><span class="op">$</span><span class="va">skipjack</span>,</span>
<span>        price <span class="op">=</span> <span class="fl">100</span>,</span>
<span>        <span class="co"># price per unit weight</span></span>
<span>        sel_form <span class="op">=</span> <span class="st">"logistic"</span>,</span>
<span>        <span class="co"># selectivity form, one of logistic or dome</span></span>
<span>        sel_start <span class="op">=</span> <span class="fl">.3</span>,</span>
<span>        <span class="co"># percentage of length at maturity that selectivity starts</span></span>
<span>        sel_delta <span class="op">=</span> <span class="fl">.1</span>,</span>
<span>        <span class="co"># additional percentage of sel_start where selectivity asymptotes</span></span>
<span>        catchability <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>        <span class="co"># overwritten by tune_fleet but can be set manually here</span></span>
<span>        p_explt <span class="op">=</span> <span class="fl">1</span></span>
<span>      <span class="op">)</span>,</span>
<span>       <span class="st">"bigeye"</span> <span class="op">=</span> <span class="va"><a href="../reference/Metier.html">Metier</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>        critter <span class="op">=</span> <span class="va">fauna</span><span class="op">$</span><span class="va">bigeye</span>,</span>
<span>        price <span class="op">=</span> <span class="fl">10</span>,</span>
<span>        sel_form <span class="op">=</span> <span class="st">"logistic"</span>,</span>
<span>        sel_start <span class="op">=</span> <span class="fl">.1</span>,</span>
<span>        sel_delta <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>        catchability <span class="op">=</span> <span class="fl">0</span>,</span>
<span>        p_explt <span class="op">=</span> <span class="fl">1</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    base_effort <span class="op">=</span> <span class="va">resolution</span> <span class="op">^</span> <span class="fl">2</span>,</span>
<span>        resolution <span class="op">=</span> <span class="va">resolution</span></span>
<span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="st">"purseseine"</span> <span class="op">=</span> <span class="fu"><a href="../reference/create_fleet.html">create_fleet</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    skipjack <span class="op">=</span> <span class="va"><a href="../reference/Metier.html">Metier</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>      critter <span class="op">=</span> <span class="va">fauna</span><span class="op">$</span><span class="va">skipjack</span>,</span>
<span>      price <span class="op">=</span> <span class="fl">100</span>,</span>
<span>      sel_form <span class="op">=</span> <span class="st">"logistic"</span>,</span>
<span>      sel_start <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>      sel_delta <span class="op">=</span> <span class="fl">.1</span>,</span>
<span>      catchability <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>      p_explt <span class="op">=</span> <span class="fl">0.9</span></span>
<span>    <span class="op">)</span>,</span>
<span>    bigeye <span class="op">=</span> <span class="va"><a href="../reference/Metier.html">Metier</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>      critter <span class="op">=</span> <span class="va">fauna</span><span class="op">$</span><span class="va">bigeye</span>,</span>
<span>      price <span class="op">=</span> <span class="fl">100</span>,</span>
<span>      sel_form <span class="op">=</span> <span class="st">"logistic"</span>,</span>
<span>      sel_start <span class="op">=</span> <span class="fl">.25</span>,</span>
<span>      sel_delta <span class="op">=</span> <span class="fl">.5</span>,</span>
<span>      catchability <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>      p_explt <span class="op">=</span> <span class="fl">1</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  base_effort <span class="op">=</span> <span class="va">resolution</span> <span class="op">^</span> <span class="fl">2</span>,    resolution <span class="op">=</span> <span class="va">resolution</span></span>
<span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fleets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tune_fleets.html">tune_fleets</a></span><span class="op">(</span><span class="va">fauna</span>, <span class="va">fleets</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">a</span></span>
<span><span class="co">#&gt; Time difference of 2.818566 secs</span></span>
<span></span>
<span></span>
<span><span class="co"># run simulations</span></span>
<span></span>
<span><span class="co"># run the simulation using marlin::simmar</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simmar.html">simmar</a></span><span class="op">(</span>fauna <span class="op">=</span> <span class="va">fauna</span>,</span>
<span>                  fleets <span class="op">=</span> <span class="va">fleets</span>,</span>
<span>                  years <span class="op">=</span> <span class="va">years</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">a</span></span>
<span><span class="co">#&gt; Time difference of 0.5498688 secs</span></span>
<span><span class="co"># a &lt;- Sys.time()</span></span>
<span></span>
<span><span class="va">processed_marlin</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_marlin.html">process_marlin</a></span><span class="op">(</span>sim <span class="op">=</span> <span class="va">sim</span>, time_step <span class="op">=</span> <span class="va">time_step</span>, keep_age <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Sys.time() - a</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_marlin.html">plot_marlin</a></span><span class="op">(</span><span class="va">processed_marlin</span><span class="op">)</span></span></code></pre></div>
<p><img src="optimize_mpa_files/figure-html/setup-1.png" width="700"></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/plot_marlin.html">plot_marlin</a></span><span class="op">(</span><span class="va">processed_marlin</span>, plot_var <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span></span></code></pre></div>
<p><img src="optimize_mpa_files/figure-html/setup-2.png" width="700"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/plot_marlin.html">plot_marlin</a></span><span class="op">(</span><span class="va">processed_marlin</span>, plot_var <span class="op">=</span> <span class="st">"n"</span>, plot_type <span class="op">=</span> <span class="st">"length"</span>, fauna <span class="op">=</span> <span class="va">fauna</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in plot_marlin(processed_marlin, plot_var = "n", plot_type = "length", :</span></span>
<span><span class="co">#&gt; trying to plot too many steps at once, cutting down to 10</span></span>
<span><span class="co">#&gt; dropping recruits from plot since drop_recruits = TRUE</span></span></code></pre></div>
<p><img src="optimize_mpa_files/figure-html/setup-3.png" width="700"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/plot_marlin.html">plot_marlin</a></span><span class="op">(</span><span class="va">processed_marlin</span>, plot_var <span class="op">=</span> <span class="st">"ssb"</span>, plot_type <span class="op">=</span> <span class="st">"space"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in plot_marlin(processed_marlin, plot_var = "ssb", plot_type = "space"):</span></span>
<span><span class="co">#&gt; Can only plot one time step for spatial plots, defaulting to last of the</span></span>
<span><span class="co">#&gt; supplied steps</span></span></code></pre></div>
<p><img src="optimize_mpa_files/figure-html/setup-4.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">mpa_network</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_mpa.html">optimize_mpa</a></span><span class="op">(</span>fauna <span class="op">=</span> <span class="va">fauna</span>, fleets <span class="op">=</span> <span class="va">fleets</span>, resolution <span class="op">=</span> <span class="va">resolution</span>,</span>
<span>                            starting_conditions <span class="op">=</span> <span class="va">sim</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span><span class="op">]</span><span class="op">]</span>, alpha <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1% done</span></span>
<span><span class="co">#&gt; 2% done</span></span>
<span><span class="co">#&gt; 3% done</span></span>
<span><span class="co">#&gt; 4% done</span></span>
<span><span class="co">#&gt; 5% done</span></span>
<span><span class="co">#&gt; 6% done</span></span>
<span><span class="co">#&gt; 7% done</span></span>
<span><span class="co">#&gt; 8% done</span></span>
<span><span class="co">#&gt; 9% done</span></span>
<span><span class="co">#&gt; 10% done</span></span>
<span><span class="co">#&gt; 11% done</span></span>
<span><span class="co">#&gt; 12% done</span></span>
<span><span class="co">#&gt; 13% done</span></span>
<span><span class="co">#&gt; 14% done</span></span>
<span><span class="co">#&gt; 15% done</span></span>
<span><span class="co">#&gt; 16% done</span></span>
<span><span class="co">#&gt; 17% done</span></span>
<span><span class="co">#&gt; 18% done</span></span>
<span><span class="co">#&gt; 19% done</span></span>
<span><span class="co">#&gt; 20% done</span></span>
<span><span class="co">#&gt; 21% done</span></span>
<span><span class="co">#&gt; 22% done</span></span>
<span><span class="co">#&gt; 23% done</span></span>
<span><span class="co">#&gt; 24% done</span></span>
<span><span class="co">#&gt; 25% done</span></span>
<span><span class="co">#&gt; 26% done</span></span>
<span><span class="co">#&gt; 27% done</span></span>
<span><span class="co">#&gt; 28% done</span></span>
<span><span class="co">#&gt; 29% done</span></span>
<span><span class="co">#&gt; 30% done</span></span>
<span><span class="co">#&gt; 31% done</span></span>
<span><span class="co">#&gt; 32% done</span></span>
<span><span class="co">#&gt; 33% done</span></span>
<span><span class="co">#&gt; 34% done</span></span>
<span><span class="co">#&gt; 35% done</span></span>
<span><span class="co">#&gt; 36% done</span></span>
<span><span class="co">#&gt; 37% done</span></span>
<span><span class="co">#&gt; 38% done</span></span>
<span><span class="co">#&gt; 39% done</span></span>
<span><span class="co">#&gt; 40% done</span></span>
<span><span class="co">#&gt; 41% done</span></span>
<span><span class="co">#&gt; 42% done</span></span>
<span><span class="co">#&gt; 43% done</span></span>
<span><span class="co">#&gt; 44% done</span></span>
<span><span class="co">#&gt; 45% done</span></span>
<span><span class="co">#&gt; 46% done</span></span>
<span><span class="co">#&gt; 47% done</span></span>
<span><span class="co">#&gt; 48% done</span></span>
<span><span class="co">#&gt; 49% done</span></span>
<span><span class="co">#&gt; 50% done</span></span>
<span><span class="co">#&gt; 51% done</span></span>
<span><span class="co">#&gt; 52% done</span></span>
<span><span class="co">#&gt; 53% done</span></span>
<span><span class="co">#&gt; 54% done</span></span>
<span><span class="co">#&gt; 55% done</span></span>
<span><span class="co">#&gt; 56% done</span></span>
<span><span class="co">#&gt; 57% done</span></span>
<span><span class="co">#&gt; 58% done</span></span>
<span><span class="co">#&gt; 59% done</span></span>
<span><span class="co">#&gt; 60% done</span></span>
<span><span class="co">#&gt; 61% done</span></span>
<span><span class="co">#&gt; 62% done</span></span>
<span><span class="co">#&gt; 63% done</span></span>
<span><span class="co">#&gt; 64% done</span></span>
<span><span class="co">#&gt; 65% done</span></span>
<span><span class="co">#&gt; 66% done</span></span>
<span><span class="co">#&gt; 67% done</span></span>
<span><span class="co">#&gt; 68% done</span></span>
<span><span class="co">#&gt; 69% done</span></span>
<span><span class="co">#&gt; 70% done</span></span>
<span><span class="co">#&gt; 71% done</span></span>
<span><span class="co">#&gt; 72% done</span></span>
<span><span class="co">#&gt; 73% done</span></span>
<span><span class="co">#&gt; 74% done</span></span>
<span><span class="co">#&gt; 75% done</span></span>
<span><span class="co">#&gt; 76% done</span></span>
<span><span class="co">#&gt; 77% done</span></span>
<span><span class="co">#&gt; 78% done</span></span>
<span><span class="co">#&gt; 79% done</span></span>
<span><span class="co">#&gt; 80% done</span></span>
<span><span class="co">#&gt; 81% done</span></span>
<span><span class="co">#&gt; 82% done</span></span>
<span><span class="co">#&gt; 83% done</span></span>
<span><span class="co">#&gt; 84% done</span></span>
<span><span class="co">#&gt; 85% done</span></span>
<span><span class="co">#&gt; 86% done</span></span>
<span><span class="co">#&gt; 87% done</span></span>
<span><span class="co">#&gt; 88% done</span></span>
<span><span class="co">#&gt; 89% done</span></span>
<span><span class="co">#&gt; 90% done</span></span>
<span><span class="co">#&gt; 91% done</span></span>
<span><span class="co">#&gt; 92% done</span></span>
<span><span class="co">#&gt; 93% done</span></span>
<span><span class="co">#&gt; 94% done</span></span>
<span><span class="co">#&gt; 95% done</span></span>
<span><span class="co">#&gt; 96% done</span></span>
<span><span class="co">#&gt; 97% done</span></span>
<span><span class="co">#&gt; 98% done</span></span>
<span><span class="co">#&gt; 99% done</span></span>
<span><span class="co">#&gt; 100% done</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `critter` -&gt; `critter...3`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `critter` -&gt; `critter...5`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `critter` -&gt; `critter...7`</span></span>
<span></span>
<span></span>
<span><span class="va">mpa_network</span><span class="op">$</span><span class="va">mpa_network</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">p_protected</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">5</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>, fill <span class="op">=</span> <span class="va">mpa</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">p_protected</span><span class="op">)</span></span></code></pre></div>
<p><img src="optimize_mpa_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Dan Ovando.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
